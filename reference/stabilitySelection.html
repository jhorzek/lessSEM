<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Provides rudimentary stability selection for regularized SEM. Stability
selection has been proposed by Meinshausen &amp;amp; Bühlmann (2010) and was
extended to SEM by Li &amp;amp; Jacobucci (2021). The problem that stabiltiy selection
tries to solve is the instability of regularization procedures: Small changes in
the data set may result in different parameters being selected. To address
this issue, stability selection uses random subsamples from the initial data
set and fits models in these subsamples. For each parameter, we can now check
how often it is included in the model for a given set of tuning parameters.
Plotting these probabilities can provide an overview over which of the parameters
are often removed and which remain in the model most of the time. To get
a final selection, a threshold t can be defined: If a parameter is in the model
t% of the time, it is retained."><title>stabilitySelection — stabilitySelection • lessSEM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="stabilitySelection — stabilitySelection"><meta property="og:description" content="Provides rudimentary stability selection for regularized SEM. Stability
selection has been proposed by Meinshausen &amp;amp; Bühlmann (2010) and was
extended to SEM by Li &amp;amp; Jacobucci (2021). The problem that stabiltiy selection
tries to solve is the instability of regularization procedures: Small changes in
the data set may result in different parameters being selected. To address
this issue, stability selection uses random subsamples from the initial data
set and fits models in these subsamples. For each parameter, we can now check
how often it is included in the model for a given set of tuning parameters.
Plotting these probabilities can provide an overview over which of the parameters
are often removed and which remain in the model most of the time. To get
a final selection, a threshold t can be defined: If a parameter is in the model
t% of the time, it is retained."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lessSEM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/lessSEM.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Definition-Variables-and-Multi-Group-SEM.html">Definition-Variables-and-Multi-Group-SEM</a>
    <a class="dropdown-item" href="../articles/Estimator-Settings.html">Estimator-Settings</a>
    <a class="dropdown-item" href="../articles/General-Purpose-Optimization.html">General-Purpose-Optimization</a>
    <a class="dropdown-item" href="../articles/Mixed-Penalties.html">Mixed Penalties</a>
    <a class="dropdown-item" href="../articles/Parameter-transformations.html">Parameter-transformations</a>
    <a class="dropdown-item" href="../articles/SCAD-and-MCP.html">SCAD-and-MCP</a>
    <a class="dropdown-item" href="../articles/The-Structural-Equation-Model.html">The-Structural-Equation-Model</a>
    <a class="dropdown-item" href="../articles/The-optimizer-interface.html">The-optimizer-interface</a>
    <a class="dropdown-item" href="../articles/log-likelihood-gradients.html">log-likelihood-gradients</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jhorzek/lessSEM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>stabilitySelection</h1>
      <small class="dont-index">Source: <a href="https://github.com/jhorzek/lessSEM/blob/HEAD/R/stabilitySelection.R" class="external-link"><code>R/stabilitySelection.R</code></a></small>
      <div class="d-none name"><code>stabilitySelection.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Provides rudimentary stability selection for regularized SEM. Stability
selection has been proposed by Meinshausen &amp; Bühlmann (2010) and was
extended to SEM by Li &amp; Jacobucci (2021). The problem that stabiltiy selection
tries to solve is the instability of regularization procedures: Small changes in
the data set may result in different parameters being selected. To address
this issue, stability selection uses random subsamples from the initial data
set and fits models in these subsamples. For each parameter, we can now check
how often it is included in the model for a given set of tuning parameters.
Plotting these probabilities can provide an overview over which of the parameters
are often removed and which remain in the model most of the time. To get
a final selection, a threshold t can be defined: If a parameter is in the model
t% of the time, it is retained.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stabilitySelection</span><span class="op">(</span></span>
<span>  <span class="va">modelSpecification</span>,</span>
<span>  <span class="va">subsampleSize</span>,</span>
<span>  numberOfSubsamples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">70</span>,</span>
<span>  maxTries <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="va">numberOfSubsamples</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>modelSpecification</dt>
<dd><p>a call to one of the penalty functions in lessSEM. See
examples for details</p></dd>


<dt>subsampleSize</dt>
<dd><p>number of subjects in each subsample. Must be smaller than
the number of subjects in the original data set</p></dd>


<dt>numberOfSubsamples</dt>
<dd><p>number of times the procedure should subsample and
recompute the model. According to Meinshausen &amp; Bühlmann (2010), 100 seems to
work quite well and is also the default in regsem</p></dd>


<dt>threshold</dt>
<dd><p>percentage of models, where the parameter should be contained in order
to be in the final model</p></dd>


<dt>maxTries</dt>
<dd><p>fitting models in a subset may fail. maxTries sets the maximal
number of subsets to try.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>estimates for each subsample and aggregated percentages for each parameter</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Li, X., &amp; Jacobucci, R. (2021). Regularized structural equation modeling with
stability selection. Psychological Methods, 27(4), 497–518. https://doi.org/10.1037/met0000389</p></li>
<li><p>Meinshausen, N., &amp; Bühlmann, P. (2010). Stability selection. Journal of the
Royal Statistical Society: Series B (Statistical Methodology), 72(4), 417–473.
https://doi.org/10.1111/j.1467-9868.2010.00740.x</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhorzek/lessSEM" class="external-link">lessSEM</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Identical to regsem, lessSEM builds on the lavaan</span></span>
<span><span class="co"># package for model specification. The first step</span></span>
<span><span class="co"># therefore is to implement the model in lavaan.</span></span>
<span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="simulateExampleData.html">simulateExampleData</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lavaanSyntax</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">f =~ l1*y1 + l2*y2 + l3*y3 + l4*y4 + l5*y5 + </span></span>
<span><span class="st">     l6*y6 + l7*y7 + l8*y8 + l9*y9 + l10*y10 + </span></span>
<span><span class="st">     l11*y11 + l12*y12 + l13*y13 + l14*y14 + l15*y15</span></span>
<span><span class="st">f ~~ 1*f</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="va">lavaanModel</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">lavaanSyntax</span>,</span>
<span>                           data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                           meanstructure <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                           std.lv <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Stability selection</span></span>
<span><span class="va">stabSel</span> <span class="op">&lt;-</span> <span class="fu">stabilitySelection</span><span class="op">(</span></span>
<span>  <span class="co"># IMPORTANT: Wrap your call to the penalty function in an rlang::expr-Block:</span></span>
<span>  modelSpecification <span class="op">=</span> </span>
<span>    <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">expr</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="lasso.html">lasso</a></span><span class="op">(</span></span>
<span>        <span class="co"># pass the fitted lavaan model</span></span>
<span>        lavaanModel <span class="op">=</span> <span class="va">lavaanModel</span>,</span>
<span>        <span class="co"># names of the regularized parameters:</span></span>
<span>        regularized <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="fl">6</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>        <span class="co"># in case of lasso and adaptive lasso, we can specify the number of lambda</span></span>
<span>        <span class="co"># values to use. lessSEM will automatically find lambda_max and fit</span></span>
<span>        <span class="co"># models for nLambda values between 0 and lambda_max. For the other</span></span>
<span>        <span class="co"># penalty functions, lambdas must be specified explicitly</span></span>
<span>        nLambdas <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>  subsampleSize <span class="op">=</span> <span class="fl">80</span>,</span>
<span>  numberOfSubsamples <span class="op">=</span> <span class="fl">5</span>, <span class="co"># should be set to a much higher number (e.g., 100)</span></span>
<span>  threshold <span class="op">=</span> <span class="fl">70</span></span>
<span><span class="op">)</span></span>
<span><span class="va">stabSel</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">stabSel</span><span class="op">)</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jannik H. Orzek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

